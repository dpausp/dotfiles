source ~/.keychain/${HOSTNAME}-sh

export PATH=$PATH:~/startscripts:~/progs/scala/bin:~/progs/bin:~/.local/bin/:~/node_modules/.bin:~/.cabal/bin
export LC_MESSAGES=C
export EDITOR=vim
export GIT_PAGER="vim -R -"
export GIT_SSH="/usr/bin/ssh"

# bash settings
export HISTFILESIZE=20000
export HISTSIZE=20000
export HISTIGNORE="fg:exit:popd:cd ..:cd ..:pwd:history:ls:la:[ ]\t*:??:cd:?:"
export PROMPT_COMMAND="history -a"
shopt -s histappend
alias u='history -n'

alias pcwd="source ~/.scripts/pcwd"
alias gita="git add"
alias gitd="git diff"
alias gitl="git log"
alias gitck="git checkout"
alias gitc="git commit"
alias gits="git status"
alias gitb="git bisect"
alias gitp="git push"

alias mv='mv -i'
alias rm='rm -i'
alias cp='cp -i'
alias cd..='cd ..'
alias ls='ls --color'
alias la='ls -lA'
alias ll='ls -l'
alias sl='su -'
alias r="cd /etc/init.d && ls --color"
alias dum='du -m --max-depth=1'
alias sl='ls --color'
alias sd="cd /usr/src"
alias tz="tar xzf"
alias tj="tar xjf"
alias rs="rsync -a --stats --rsh='ssh -p 35'"
alias rsl="rsync -a --stats --rsh='ssh -p 35 -oNoneEnabled=yes -oNoneSwitch=yes -oHPNBufferSize=8192 -v'"
alias rsn="rsync -a --stats --rsh='ssh -p 22'"
alias m="mount"
alias pstat="python -mpstats"
alias shm="cd /dev/shm"

# git-aware-prompt
export GITAWAREPROMPT=~/.bash/git-aware-prompt
source $GITAWAREPROMPT/main.sh
PS1="\[\e[01;34m\]\u@\h\[\e[01;32m\] \w \$git_branch\[\e[01;31m\]\$git_dirty\[\e[0m\]> "

# tmux settings 

if [ -n "$TMUX" ]; then
export TERM=screen-256color
fi

source ~/.dotfiles/preexec.bash

precmd() {
    W=`whoami`@`hostname`:`pwd | sed -e"s#${HOME}#~#"`
    [[ $TMUX == *tmux* ]] && tmux set -g status-left "#[fg=green,bold][#S] $W" > /dev/null
    [[ $DISPLAY ]] && preexec_xterm_title $W
}

preexec() {
    true
}

preexec_install

source ~/.bashrc.local
